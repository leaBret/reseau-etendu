2024-04-17 16:34:44,863 -  nornir.core -     INFO -        run() - Running task 'hello_world' with args {} on 6 hosts
2024-04-17 16:34:54,481 -  nornir.core -     INFO -        run() - Running task 'hello_world' with args {} on 6 hosts
2024-04-17 16:38:21,394 -  nornir.core -     INFO -        run() - Running task 'hello_world' with args {} on 6 hosts
2024-04-17 16:42:28,001 -  nornir.core -     INFO -        run() - Running task 'hello_world' with args {} on 6 hosts
2024-04-17 16:42:38,938 -  nornir.core -     INFO -        run() - Running task 'hello_world' with args {} on 6 hosts
2024-04-17 16:42:55,412 -  nornir.core -     INFO -        run() - Running task 'hello_world' with args {} on 6 hosts
2024-04-17 16:43:15,837 -  nornir.core -     INFO -        run() - Running task 'hello_world' with args {} on 6 hosts
2024-04-17 16:43:32,475 -  nornir.core -     INFO -        run() - Running task 'hello_world' with args {} on 6 hosts
2024-04-17 16:45:59,071 -  nornir.core -     INFO -        run() - Running task 'hello_world' with args {} on 6 hosts
2024-04-17 16:50:53,820 -  nornir.core -     INFO -        run() - Running task 'hello_world' with args {} on 6 hosts
2024-04-17 16:56:58,663 -  nornir.core -     INFO -        run() - Running task 'hello_world' with args {} on 6 hosts
2024-04-17 16:56:58,665 -  nornir.core -     INFO -        run() - Running task 'hello_world' with args {} on 6 hosts
2024-04-17 16:59:15,675 -  nornir.core -     INFO -        run() - Running task 'hello_world' with args {} on 6 hosts
2024-04-17 16:59:15,676 -  nornir.core -     INFO -        run() - Running task 'hello_world' with args {} on 6 hosts
2024-04-17 17:01:01,350 -  nornir.core -     INFO -        run() - Running task 'hello_world' with args {'filter_func': <function question_30.<locals>.<lambda> at 0x7efd3074e0d0>} on 6 hosts
2024-04-17 17:01:01,351 - nornir.core.task -    ERROR -      start() - Host 'R2-CPE-BAT-A': task 'hello_world' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/devnet-7o8smFAx/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
TypeError: hello_world() got an unexpected keyword argument 'filter_func'

2024-04-17 17:01:01,351 - nornir.core.task -    ERROR -      start() - Host 'R1-CPE-BAT-A': task 'hello_world' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/devnet-7o8smFAx/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
TypeError: hello_world() got an unexpected keyword argument 'filter_func'

2024-04-17 17:01:01,352 - nornir.core.task -    ERROR -      start() - Host 'ESW1-CPE-BAT-A': task 'hello_world' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/devnet-7o8smFAx/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
TypeError: hello_world() got an unexpected keyword argument 'filter_func'

2024-04-17 17:01:01,352 - nornir.core.task -    ERROR -      start() - Host 'R1-CPE-BAT-B': task 'hello_world' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/devnet-7o8smFAx/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
TypeError: hello_world() got an unexpected keyword argument 'filter_func'

2024-04-17 17:01:01,352 - nornir.core.task -    ERROR -      start() - Host 'R2-CPE-BAT-B': task 'hello_world' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/devnet-7o8smFAx/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
TypeError: hello_world() got an unexpected keyword argument 'filter_func'

2024-04-17 17:01:01,353 - nornir.core.task -    ERROR -      start() - Host 'ESW1-CPE-BAT-B': task 'hello_world' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/devnet-7o8smFAx/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
TypeError: hello_world() got an unexpected keyword argument 'filter_func'

2024-04-17 17:04:39,375 -  nornir.core -     INFO -        run() - Running task 'hello_world' with args {} on 6 hosts
2024-04-17 17:05:54,369 -  nornir.core -     INFO -        run() - Running task 'hello_world' with args {} on 2 hosts
2024-04-17 17:06:15,527 -  nornir.core -     INFO -        run() - Running task 'hello_world' with args {} on 2 hosts
2024-04-29 14:54:59,270 -  nornir.core -     INFO -        run() - Running task 'napalm_cli' with args {'commands': ['sh ip int br']} on 6 hosts
2024-04-29 14:55:10,852 - nornir.core.task -    ERROR -      start() - Host 'ESW1-CPE-BAT-A': task 'napalm_cli' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/paramiko/client.py", line 386, in connect
    sock.connect(addr)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/base/base.py", line 114, in _netmiko_open
    self._netmiko_device = ConnectHandler(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1159, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: TCP connection to device failed.

Common causes of this problem are:
1. Incorrect hostname or IP address.
2. Wrong TCP port.
3. Intermediate firewall blocking access.

Device settings: cisco_ios 172.16.100.123:22



During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_napalm/plugins/tasks/napalm_cli.py", line 19, in napalm_cli
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_napalm/plugins/connections/__init__.py", line 57, in open
    connection.open()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 173, in open
    self.device = self._netmiko_open(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/base/base.py", line 123, in _netmiko_open
    raise ConnectionException("Cannot connect to {}".format(self.hostname))
napalm.base.exceptions.ConnectionException: Cannot connect to 172.16.100.123

2024-04-29 14:55:10,867 - nornir.core.task -    ERROR -      start() - Host 'R2-CPE-BAT-B': task 'napalm_cli' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/paramiko/client.py", line 386, in connect
    sock.connect(addr)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/base/base.py", line 114, in _netmiko_open
    self._netmiko_device = ConnectHandler(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1159, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: TCP connection to device failed.

Common causes of this problem are:
1. Incorrect hostname or IP address.
2. Wrong TCP port.
3. Intermediate firewall blocking access.

Device settings: cisco_ios 172.16.100.190:22



During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_napalm/plugins/tasks/napalm_cli.py", line 19, in napalm_cli
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_napalm/plugins/connections/__init__.py", line 57, in open
    connection.open()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 173, in open
    self.device = self._netmiko_open(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/base/base.py", line 123, in _netmiko_open
    raise ConnectionException("Cannot connect to {}".format(self.hostname))
napalm.base.exceptions.ConnectionException: Cannot connect to 172.16.100.190

2024-04-29 14:55:10,868 - nornir.core.task -    ERROR -      start() - Host 'R2-CPE-BAT-A': task 'napalm_cli' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/paramiko/client.py", line 386, in connect
    sock.connect(addr)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/base/base.py", line 114, in _netmiko_open
    self._netmiko_device = ConnectHandler(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1159, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: TCP connection to device failed.

Common causes of this problem are:
1. Incorrect hostname or IP address.
2. Wrong TCP port.
3. Intermediate firewall blocking access.

Device settings: cisco_ios 172.16.100.126:22



During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_napalm/plugins/tasks/napalm_cli.py", line 19, in napalm_cli
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_napalm/plugins/connections/__init__.py", line 57, in open
    connection.open()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 173, in open
    self.device = self._netmiko_open(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/base/base.py", line 123, in _netmiko_open
    raise ConnectionException("Cannot connect to {}".format(self.hostname))
napalm.base.exceptions.ConnectionException: Cannot connect to 172.16.100.126

2024-04-29 14:55:10,870 - nornir.core.task -    ERROR -      start() - Host 'ESW1-CPE-BAT-B': task 'napalm_cli' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/paramiko/client.py", line 386, in connect
    sock.connect(addr)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/base/base.py", line 114, in _netmiko_open
    self._netmiko_device = ConnectHandler(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1159, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: TCP connection to device failed.

Common causes of this problem are:
1. Incorrect hostname or IP address.
2. Wrong TCP port.
3. Intermediate firewall blocking access.

Device settings: cisco_ios 172.16.100.187:22



During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_napalm/plugins/tasks/napalm_cli.py", line 19, in napalm_cli
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_napalm/plugins/connections/__init__.py", line 57, in open
    connection.open()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 173, in open
    self.device = self._netmiko_open(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/base/base.py", line 123, in _netmiko_open
    raise ConnectionException("Cannot connect to {}".format(self.hostname))
napalm.base.exceptions.ConnectionException: Cannot connect to 172.16.100.187

2024-04-29 14:55:10,917 - nornir.core.task -    ERROR -      start() - Host 'R1-CPE-BAT-A': task 'napalm_cli' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/paramiko/client.py", line 386, in connect
    sock.connect(addr)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/base/base.py", line 114, in _netmiko_open
    self._netmiko_device = ConnectHandler(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1159, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: TCP connection to device failed.

Common causes of this problem are:
1. Incorrect hostname or IP address.
2. Wrong TCP port.
3. Intermediate firewall blocking access.

Device settings: cisco_ios 172.16.100.125:22



During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_napalm/plugins/tasks/napalm_cli.py", line 19, in napalm_cli
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_napalm/plugins/connections/__init__.py", line 57, in open
    connection.open()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 173, in open
    self.device = self._netmiko_open(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/base/base.py", line 123, in _netmiko_open
    raise ConnectionException("Cannot connect to {}".format(self.hostname))
napalm.base.exceptions.ConnectionException: Cannot connect to 172.16.100.125

2024-04-29 14:55:10,973 - nornir.core.task -    ERROR -      start() - Host 'R1-CPE-BAT-B': task 'napalm_cli' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/paramiko/client.py", line 386, in connect
    sock.connect(addr)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/base/base.py", line 114, in _netmiko_open
    self._netmiko_device = ConnectHandler(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1159, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: TCP connection to device failed.

Common causes of this problem are:
1. Incorrect hostname or IP address.
2. Wrong TCP port.
3. Intermediate firewall blocking access.

Device settings: cisco_ios 172.16.100.189:22



During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_napalm/plugins/tasks/napalm_cli.py", line 19, in napalm_cli
    device = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_napalm/plugins/connections/__init__.py", line 57, in open
    connection.open()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 173, in open
    self.device = self._netmiko_open(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/base/base.py", line 123, in _netmiko_open
    raise ConnectionException("Cannot connect to {}".format(self.hostname))
napalm.base.exceptions.ConnectionException: Cannot connect to 172.16.100.189

2024-04-29 14:55:50,871 -  nornir.core -     INFO -        run() - Running task 'napalm_cli' with args {'commands': ['sh ip int br']} on 6 hosts
2024-04-29 14:56:45,814 -  nornir.core -     INFO -        run() - Running task 'napalm_cli' with args {'commands': ['sh ip int br']} on 6 hosts
2024-04-29 14:58:52,566 -  nornir.core -     INFO -        run() - Running task 'napalm_get' with args {'getters': ['arp_table']} on 6 hosts
2024-04-29 15:01:52,366 -  nornir.core -     INFO -        run() - Running task 'napalm_configure' with args {'configuration': 'int lo1\nip address 1.1.1.1 255.255.255.255'} on 6 hosts
2024-04-29 15:02:02,479 - nornir.core.task -    ERROR -      start() - Host 'R1-CPE-BAT-B': task 'napalm_configure' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_napalm/plugins/tasks/napalm_configure.py", line 36, in napalm_configure
    device.load_merge_candidate(filename=filename, config=configuration)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 320, in load_merge_candidate
    return_status, msg = self._load_candidate_wrapper(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 274, in _load_candidate_wrapper
    (return_status, msg) = self._scp_file(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 736, in _scp_file
    return self._xfer_file(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 804, in _xfer_file
    raise CommandErrorException(msg)
napalm.base.exceptions.CommandErrorException: SCP file transfers are not enabled. Configure 'ip scp server enable' on the device.

2024-04-29 15:02:02,778 - nornir.core.task -    ERROR -      start() - Host 'R2-CPE-BAT-B': task 'napalm_configure' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_napalm/plugins/tasks/napalm_configure.py", line 36, in napalm_configure
    device.load_merge_candidate(filename=filename, config=configuration)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 320, in load_merge_candidate
    return_status, msg = self._load_candidate_wrapper(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 274, in _load_candidate_wrapper
    (return_status, msg) = self._scp_file(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 736, in _scp_file
    return self._xfer_file(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 804, in _xfer_file
    raise CommandErrorException(msg)
napalm.base.exceptions.CommandErrorException: SCP file transfers are not enabled. Configure 'ip scp server enable' on the device.

2024-04-29 15:02:07,745 - nornir.core.task -    ERROR -      start() - Host 'ESW1-CPE-BAT-A': task 'napalm_configure' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_napalm/plugins/tasks/napalm_configure.py", line 36, in napalm_configure
    device.load_merge_candidate(filename=filename, config=configuration)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 320, in load_merge_candidate
    return_status, msg = self._load_candidate_wrapper(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 274, in _load_candidate_wrapper
    (return_status, msg) = self._scp_file(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 736, in _scp_file
    return self._xfer_file(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 804, in _xfer_file
    raise CommandErrorException(msg)
napalm.base.exceptions.CommandErrorException: SCP file transfers are not enabled. Configure 'ip scp server enable' on the device.

2024-04-29 15:02:08,178 - nornir.core.task -    ERROR -      start() - Host 'ESW1-CPE-BAT-B': task 'napalm_configure' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_napalm/plugins/tasks/napalm_configure.py", line 36, in napalm_configure
    device.load_merge_candidate(filename=filename, config=configuration)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 320, in load_merge_candidate
    return_status, msg = self._load_candidate_wrapper(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 274, in _load_candidate_wrapper
    (return_status, msg) = self._scp_file(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 736, in _scp_file
    return self._xfer_file(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 804, in _xfer_file
    raise CommandErrorException(msg)
napalm.base.exceptions.CommandErrorException: SCP file transfers are not enabled. Configure 'ip scp server enable' on the device.

2024-04-29 15:02:11,962 -  nornir.core -     INFO -        run() - Running task 'napalm_configure' with args {'configuration': 'int lo1\nip address 2.2.2.2 255.255.255.255'} on 2 hosts
2024-04-29 15:04:12,596 -  nornir.core -     INFO -        run() - Running task 'napalm_configure' with args {'configuration': 'int lo1\nip address 1.1.1.1 255.255.255.255'} on 1 hosts
2024-04-29 15:04:26,640 -  nornir.core -     INFO -        run() - Running task 'napalm_configure' with args {'configuration': 'int lo1\nip address 2.2.2.2 255.255.255.255'} on 1 hosts
2024-04-29 15:08:15,622 -  nornir.core -     INFO -        run() - Running task 'napalm_cli' with args {'commands': ['wr']} on 6 hosts
2024-04-29 15:08:29,621 - nornir.core.task -    ERROR -      start() - Host 'ESW1-CPE-BAT-A': task 'napalm_cli' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_napalm/plugins/tasks/napalm_cli.py", line 20, in napalm_cli
    result = device.cli(commands, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 2540, in cli
    output = self._send_command(command)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 209, in _send_command
    output = self.device.send_command(command)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 110, in wrapper_decorator
    return_val = func(self, *args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/utilities.py", line 595, in wrapper_decorator
    return func(self, *args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1824, in send_command
    raise ReadTimeout(msg)
netmiko.exceptions.ReadTimeout: 
Pattern not detected: 'ESW1\\-CPE\\-BAT\\-A\\#' in output.

Things you might try to fix this:
1. Explicitly set your pattern using the expect_string argument.
2. Increase the read_timeout to a larger value.

You can also look at the Netmiko session_log or debug log for more information.



2024-04-29 15:08:29,707 - nornir.core.task -    ERROR -      start() - Host 'ESW1-CPE-BAT-B': task 'napalm_cli' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_napalm/plugins/tasks/napalm_cli.py", line 20, in napalm_cli
    result = device.cli(commands, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 2540, in cli
    output = self._send_command(command)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/napalm/ios/ios.py", line 209, in _send_command
    output = self.device.send_command(command)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 110, in wrapper_decorator
    return_val = func(self, *args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/utilities.py", line 595, in wrapper_decorator
    return func(self, *args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1824, in send_command
    raise ReadTimeout(msg)
netmiko.exceptions.ReadTimeout: 
Pattern not detected: 'ESW2\\#' in output.

Things you might try to fix this:
1. Explicitly set your pattern using the expect_string argument.
2. Increase the read_timeout to a larger value.

You can also look at the Netmiko session_log or debug log for more information.



2024-04-29 15:10:15,266 -  nornir.core -     INFO -        run() - Running task 'napalm_cli' with args {'commands': ['wr']} on 6 hosts
2024-04-29 15:12:04,184 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_command' with args {'commands': ['sh ip int br']} on 6 hosts
2024-04-29 15:12:04,190 - nornir.core.task -    ERROR -      start() - Host 'R1-CPE-BAT-A': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
TypeError: netmiko_send_command() missing 1 required positional argument: 'command_string'

2024-04-29 15:12:04,192 - nornir.core.task -    ERROR -      start() - Host 'R2-CPE-BAT-A': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
TypeError: netmiko_send_command() missing 1 required positional argument: 'command_string'

2024-04-29 15:12:04,197 - nornir.core.task -    ERROR -      start() - Host 'ESW1-CPE-BAT-A': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
TypeError: netmiko_send_command() missing 1 required positional argument: 'command_string'

2024-04-29 15:12:04,199 - nornir.core.task -    ERROR -      start() - Host 'R1-CPE-BAT-B': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
TypeError: netmiko_send_command() missing 1 required positional argument: 'command_string'

2024-04-29 15:12:04,200 - nornir.core.task -    ERROR -      start() - Host 'R2-CPE-BAT-B': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
TypeError: netmiko_send_command() missing 1 required positional argument: 'command_string'

2024-04-29 15:12:04,204 - nornir.core.task -    ERROR -      start() - Host 'ESW1-CPE-BAT-B': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
TypeError: netmiko_send_command() missing 1 required positional argument: 'command_string'

2024-04-29 15:12:46,102 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_command' with args {'command_string': ['sh ip int br']} on 6 hosts
2024-04-29 15:12:48,124 - nornir.core.task -    ERROR -      start() - Host 'R1-CPE-BAT-A': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_netmiko/tasks/netmiko_send_command.py", line 32, in netmiko_send_command
    result = net_connect.send_command(command_string, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 110, in wrapper_decorator
    return_val = func(self, *args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/utilities.py", line 595, in wrapper_decorator
    return func(self, *args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1765, in send_command
    command_string = self.normalize_cmd(command_string)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1982, in normalize_cmd
    command = command.rstrip()
AttributeError: 'list' object has no attribute 'rstrip'

2024-04-29 15:12:48,200 - nornir.core.task -    ERROR -      start() - Host 'R2-CPE-BAT-A': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_netmiko/tasks/netmiko_send_command.py", line 32, in netmiko_send_command
    result = net_connect.send_command(command_string, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 110, in wrapper_decorator
    return_val = func(self, *args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/utilities.py", line 595, in wrapper_decorator
    return func(self, *args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1765, in send_command
    command_string = self.normalize_cmd(command_string)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1982, in normalize_cmd
    command = command.rstrip()
AttributeError: 'list' object has no attribute 'rstrip'

2024-04-29 15:12:48,683 - nornir.core.task -    ERROR -      start() - Host 'ESW1-CPE-BAT-A': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_netmiko/tasks/netmiko_send_command.py", line 32, in netmiko_send_command
    result = net_connect.send_command(command_string, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 110, in wrapper_decorator
    return_val = func(self, *args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/utilities.py", line 595, in wrapper_decorator
    return func(self, *args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1765, in send_command
    command_string = self.normalize_cmd(command_string)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1982, in normalize_cmd
    command = command.rstrip()
AttributeError: 'list' object has no attribute 'rstrip'

2024-04-29 15:12:48,786 - nornir.core.task -    ERROR -      start() - Host 'R1-CPE-BAT-B': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_netmiko/tasks/netmiko_send_command.py", line 32, in netmiko_send_command
    result = net_connect.send_command(command_string, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 110, in wrapper_decorator
    return_val = func(self, *args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/utilities.py", line 595, in wrapper_decorator
    return func(self, *args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1765, in send_command
    command_string = self.normalize_cmd(command_string)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1982, in normalize_cmd
    command = command.rstrip()
AttributeError: 'list' object has no attribute 'rstrip'

2024-04-29 15:12:49,261 - nornir.core.task -    ERROR -      start() - Host 'ESW1-CPE-BAT-B': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_netmiko/tasks/netmiko_send_command.py", line 32, in netmiko_send_command
    result = net_connect.send_command(command_string, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 110, in wrapper_decorator
    return_val = func(self, *args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/utilities.py", line 595, in wrapper_decorator
    return func(self, *args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1765, in send_command
    command_string = self.normalize_cmd(command_string)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1982, in normalize_cmd
    command = command.rstrip()
AttributeError: 'list' object has no attribute 'rstrip'

2024-04-29 15:12:49,269 - nornir.core.task -    ERROR -      start() - Host 'R2-CPE-BAT-B': task 'netmiko_send_command' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_netmiko/tasks/netmiko_send_command.py", line 32, in netmiko_send_command
    result = net_connect.send_command(command_string, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 110, in wrapper_decorator
    return_val = func(self, *args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/utilities.py", line 595, in wrapper_decorator
    return func(self, *args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1765, in send_command
    command_string = self.normalize_cmd(command_string)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1982, in normalize_cmd
    command = command.rstrip()
AttributeError: 'list' object has no attribute 'rstrip'

2024-04-29 15:14:54,824 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_command' with args {'command_string': 'sh ip int brief'} on 6 hosts
2024-04-29 15:15:16,474 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_command' with args {'command_string': 'sh ip int brief'} on 6 hosts
2024-04-29 15:17:20,783 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_command' with args {'command_string': 'sh ip int brief'} on 6 hosts
2024-04-29 15:21:16,946 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_config' with args {'config_commands': 'int lo1\nip address 1.1.1.1 255.255.255.255'} on 1 hosts
2024-04-29 15:21:59,759 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_config' with args {'config_commands': 'int lo2\nip address 1.1.1.2 255.255.255.255'} on 1 hosts
2024-04-29 15:22:15,877 - nornir.core.task -    ERROR -      start() - Host 'R1-CPE-BAT-A': task 'netmiko_send_config' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_netmiko/tasks/netmiko_send_config.py", line 38, in netmiko_send_config
    result = net_connect.send_config_set(config_commands=config_commands, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 110, in wrapper_decorator
    return_val = func(self, *args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 2317, in send_config_set
    output += self.read_until_pattern(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 746, in read_until_pattern
    raise ReadTimeout(msg)
netmiko.exceptions.ReadTimeout: 

Pattern not detected: 'int\\ lo2\\\nip\\ address\\ 1\\.1\\.1\\.2\\ 255\\.255\\.255\\.255' in output.

Things you might try to fix this:
1. Adjust the regex pattern to better identify the terminating string. Note, in
many situations the pattern is automatically based on the network device's prompt.
2. Increase the read_timeout to a larger value.

You can also look at the Netmiko session_log or debug log for more information.



2024-04-29 15:22:15,878 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_config' with args {'config_commands': 'int lo2\nip address 2.2.2.3 255.255.255.255'} on 1 hosts
2024-04-29 15:22:32,181 - nornir.core.task -    ERROR -      start() - Host 'R2-CPE-BAT-A': task 'netmiko_send_config' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_netmiko/tasks/netmiko_send_config.py", line 38, in netmiko_send_config
    result = net_connect.send_config_set(config_commands=config_commands, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 110, in wrapper_decorator
    return_val = func(self, *args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 2317, in send_config_set
    output += self.read_until_pattern(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 746, in read_until_pattern
    raise ReadTimeout(msg)
netmiko.exceptions.ReadTimeout: 

Pattern not detected: 'int\\ lo2\\\nip\\ address\\ 2\\.2\\.2\\.3\\ 255\\.255\\.255\\.255' in output.

Things you might try to fix this:
1. Adjust the regex pattern to better identify the terminating string. Note, in
many situations the pattern is automatically based on the network device's prompt.
2. Increase the read_timeout to a larger value.

You can also look at the Netmiko session_log or debug log for more information.



2024-04-29 15:24:09,580 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_config' with args {'config_commands': ['int lo2', 'ip address 1.1.1.2 255.255.255.255']} on 1 hosts
2024-04-29 15:24:10,878 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_config' with args {'config_commands': ['int lo2', 'ip address 2.2.2.3 255.255.255.255']} on 1 hosts
2024-04-29 15:27:44,958 -  nornir.core -     INFO -        run() - Running task 'netmiko_save_config' with args {} on 1 hosts
2024-04-29 15:27:46,559 -  nornir.core -     INFO -        run() - Running task 'netmiko_save_config' with args {} on 1 hosts
2024-04-29 16:05:39,948 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_config' with args {'config_commands': ['\n', 'interface g2/0\n', '    no shutdown\n', '    exit\n', 'interface g2/0.10\n', '    encapsulation dot1Q 10\n', '    description "Gateway for teacher vlan"\n', '    ip address 172.16.10.253 255.255.255.0\n', '    exit\n', '\n', 'interface g2/0.20\n', '    encapsulation dot1Q 20\n', '    description "Gateway for student vlan"\n', '    ip address 172.16.20.253 255.255.255.0\n', '    exit\n']} on 1 hosts
2024-04-29 16:05:49,995 - nornir.core.task -    ERROR -      start() - Host 'R1-CPE-BAT-A': task 'netmiko_send_config' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/paramiko/client.py", line 386, in connect
    sock.connect(addr)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_netmiko/tasks/netmiko_send_config.py", line 28, in netmiko_send_config
    net_connect = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_netmiko/connections/netmiko.py", line 59, in open
    connection = ConnectHandler(**parameters)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1159, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: TCP connection to device failed.

Common causes of this problem are:
1. Incorrect hostname or IP address.
2. Wrong TCP port.
3. Intermediate firewall blocking access.

Device settings: cisco_ios 172.16.100.125:22



2024-04-29 16:05:49,998 -  nornir.core -  WARNING -        run() - Task 'netmiko_save_config' has not been run  0 hosts selected
2024-04-29 16:05:49,998 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_config' with args {'config_commands': ['\n', 'interface g2/0\n', '    no shutdown\n', '    exit\n', 'interface g2/0.10\n', '    encapsulation dot1Q 10\n', '    description "Gateway for teacher vlan"\n', '    ip address 172.16.10.254 255.255.255.0\n', '    exit\n', '\n', 'interface g2/0.20\n', '    encapsulation dot1Q 20\n', '    description "Gateway for student vlan"\n', '    ip address 172.16.20.254 255.255.255.0\n', '    exit\n']} on 1 hosts
2024-04-29 16:06:00,021 - nornir.core.task -    ERROR -      start() - Host 'R2-CPE-BAT-A': task 'netmiko_send_config' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/paramiko/client.py", line 386, in connect
    sock.connect(addr)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_netmiko/tasks/netmiko_send_config.py", line 28, in netmiko_send_config
    net_connect = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_netmiko/connections/netmiko.py", line 59, in open
    connection = ConnectHandler(**parameters)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1159, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: TCP connection to device failed.

Common causes of this problem are:
1. Incorrect hostname or IP address.
2. Wrong TCP port.
3. Intermediate firewall blocking access.

Device settings: cisco_ios 172.16.100.126:22



2024-04-29 16:06:00,025 -  nornir.core -  WARNING -        run() - Task 'netmiko_save_config' has not been run  0 hosts selected
2024-04-29 16:06:00,029 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_config' with args {'config_commands': ['\n', 'vlan 10\n', '    name teacher\n', '    exit\n', 'vlan 20\n', '    name student\n', '    exit\n', '\n', '\n', 'interface fa1/14\n', '    switchport mode trunk\n', '    switchport trunk allowed vlan all\n', '    exit\n', '\n', 'interface fa1/15\n', '    switchport mode trunk\n', '    switchport trunk allowed vlan all\n', '    exit\n', '\n', 'interface fa1/1\n', '    switchport mode access\n', '    switchport access vlan 10\n', '    description "port vlan teacher"\n', '    exit\n', '\n', 'interface fa1/2\n', '    switchport mode access\n', '    switchport access vlan 20\n', '    description "port vlan student"\n', '    exit']} on 1 hosts
2024-04-29 16:06:10,043 - nornir.core.task -    ERROR -      start() - Host 'ESW1-CPE-BAT-A': task 'netmiko_send_config' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/paramiko/client.py", line 386, in connect
    sock.connect(addr)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_netmiko/tasks/netmiko_send_config.py", line 28, in netmiko_send_config
    net_connect = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_netmiko/connections/netmiko.py", line 59, in open
    connection = ConnectHandler(**parameters)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1159, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: TCP connection to device failed.

Common causes of this problem are:
1. Incorrect hostname or IP address.
2. Wrong TCP port.
3. Intermediate firewall blocking access.

Device settings: cisco_ios 172.16.100.123:22



2024-04-29 16:06:10,058 -  nornir.core -  WARNING -        run() - Task 'netmiko_save_config' has not been run  0 hosts selected
2024-04-29 16:06:10,059 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_config' with args {'config_commands': ['\n', 'interface g3/0\n', '    encapsulation dot1Q \n', '    description "**NO DESCRIPTION**"\n', '    ip address  \n', '    exit\n', '\n', 'interface g3/0.10\n', '    encapsulation dot1Q 10\n', '    description "Gateway for teacher vlan"\n', '    ip address 172.16.30.253 255.255.255.0\n', '    exit\n', '\n', 'interface g3/0.20\n', '    encapsulation dot1Q 20\n', '    description "Gateway for student vlan"\n', '    ip address 172.16.40.253 255.255.255.0\n', '    exit\n']} on 1 hosts
2024-04-29 16:06:20,076 - nornir.core.task -    ERROR -      start() - Host 'R1-CPE-BAT-B': task 'netmiko_send_config' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/paramiko/client.py", line 386, in connect
    sock.connect(addr)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_netmiko/tasks/netmiko_send_config.py", line 28, in netmiko_send_config
    net_connect = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_netmiko/connections/netmiko.py", line 59, in open
    connection = ConnectHandler(**parameters)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1159, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: TCP connection to device failed.

Common causes of this problem are:
1. Incorrect hostname or IP address.
2. Wrong TCP port.
3. Intermediate firewall blocking access.

Device settings: cisco_ios 172.16.100.189:22



2024-04-29 16:06:20,080 -  nornir.core -  WARNING -        run() - Task 'netmiko_save_config' has not been run  0 hosts selected
2024-04-29 16:06:20,081 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_config' with args {'config_commands': ['\n', 'interface g3/0\n', '    encapsulation dot1Q \n', '    description "**NO DESCRIPTION**"\n', '    ip address  \n', '    exit\n', '\n', 'interface g3/0.10\n', '    encapsulation dot1Q 10\n', '    description "Gateway for teacher vlan"\n', '    ip address 172.16.30.254 255.255.255.0\n', '    exit\n', '\n', 'interface g3/0.20\n', '    encapsulation dot1Q 20\n', '    description "Gateway for student vlan"\n', '    ip address 172.16.40.254 255.255.255.0\n', '    exit\n']} on 1 hosts
2024-04-29 16:06:30,089 - nornir.core.task -    ERROR -      start() - Host 'R2-CPE-BAT-B': task 'netmiko_send_config' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1137, in establish_connection
    self.remote_conn_pre.connect(**ssh_connect_params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/paramiko/client.py", line 386, in connect
    sock.connect(addr)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_netmiko/tasks/netmiko_send_config.py", line 28, in netmiko_send_config
    net_connect = task.host.get_connection(CONNECTION_NAME, task.nornir.config)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/inventory.py", line 494, in get_connection
    self.open_connection(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/inventory.py", line 546, in open_connection
    conn_obj.open(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_netmiko/connections/netmiko.py", line 59, in open
    connection = ConnectHandler(**parameters)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/ssh_dispatcher.py", line 399, in ConnectHandler
    return ConnectionClass(*args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 488, in __init__
    self._open()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 493, in _open
    self.establish_connection()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 1159, in establish_connection
    raise NetmikoTimeoutException(msg)
netmiko.exceptions.NetmikoTimeoutException: TCP connection to device failed.

Common causes of this problem are:
1. Incorrect hostname or IP address.
2. Wrong TCP port.
3. Intermediate firewall blocking access.

Device settings: cisco_ios 172.16.100.190:22



2024-04-29 16:06:30,091 -  nornir.core -  WARNING -        run() - Task 'netmiko_save_config' has not been run  0 hosts selected
2024-04-29 16:06:30,093 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_config' with args {'config_commands': ['\n', 'vlan 10\n', '    name teacher\n', '    exit\n', 'vlan 20\n', '    name student\n', '    exit\n', '\n', '\n', 'interface fa1/14\n', '    switchport mode trunk\n', '    switchport trunk allowed vlan all\n', '    exit\n', '\n', 'interface fa1/15\n', '    switchport mode trunk\n', '    switchport trunk allowed vlan all\n', '    exit\n', '\n', 'interface fa1/1\n', '    switchport mode access\n', '    switchport access vlan 10\n', '    description "port vlan teacher"\n', '    exit\n', '\n', 'interface fa1/2\n', '    switchport mode access\n', '    switchport access vlan 20\n', '    description "port vlan student"\n', '    exit']} on 1 hosts
2024-04-29 16:06:57,584 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_config' with args {'config_commands': ['\n', 'interface g2/0\n', '    no shutdown\n', '    exit\n', 'interface g2/0.10\n', '    encapsulation dot1Q 10\n', '    description "Gateway for teacher vlan"\n', '    ip address 172.16.10.253 255.255.255.0\n', '    exit\n', '\n', 'interface g2/0.20\n', '    encapsulation dot1Q 20\n', '    description "Gateway for student vlan"\n', '    ip address 172.16.20.253 255.255.255.0\n', '    exit\n']} on 1 hosts
2024-04-29 16:06:59,099 -  nornir.core -     INFO -        run() - Running task 'netmiko_save_config' with args {} on 1 hosts
2024-04-29 16:06:59,976 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_config' with args {'config_commands': ['\n', 'interface g2/0\n', '    no shutdown\n', '    exit\n', 'interface g2/0.10\n', '    encapsulation dot1Q 10\n', '    description "Gateway for teacher vlan"\n', '    ip address 172.16.10.254 255.255.255.0\n', '    exit\n', '\n', 'interface g2/0.20\n', '    encapsulation dot1Q 20\n', '    description "Gateway for student vlan"\n', '    ip address 172.16.20.254 255.255.255.0\n', '    exit\n']} on 1 hosts
2024-04-29 16:07:02,467 -  nornir.core -     INFO -        run() - Running task 'netmiko_save_config' with args {} on 1 hosts
2024-04-29 16:07:03,424 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_config' with args {'config_commands': ['\n', 'vlan 10\n', '    name teacher\n', '    exit\n', 'vlan 20\n', '    name student\n', '    exit\n', '\n', '\n', 'interface fa1/14\n', '    switchport mode trunk\n', '    switchport trunk allowed vlan all\n', '    exit\n', '\n', 'interface fa1/15\n', '    switchport mode trunk\n', '    switchport trunk allowed vlan all\n', '    exit\n', '\n', 'interface fa1/1\n', '    switchport mode access\n', '    switchport access vlan 10\n', '    description "port vlan teacher"\n', '    exit\n', '\n', 'interface fa1/2\n', '    switchport mode access\n', '    switchport access vlan 20\n', '    description "port vlan student"\n', '    exit']} on 1 hosts
2024-04-29 16:07:12,709 -  nornir.core -     INFO -        run() - Running task 'netmiko_save_config' with args {} on 1 hosts
2024-04-29 16:07:16,449 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_config' with args {'config_commands': ['\n', 'interface g3/0\n', '    encapsulation dot1Q \n', '    description "**NO DESCRIPTION**"\n', '    ip address  \n', '    exit\n', '\n', 'interface g3/0.10\n', '    encapsulation dot1Q 10\n', '    description "Gateway for teacher vlan"\n', '    ip address 172.16.30.253 255.255.255.0\n', '    exit\n', '\n', 'interface g3/0.20\n', '    encapsulation dot1Q 20\n', '    description "Gateway for student vlan"\n', '    ip address 172.16.40.253 255.255.255.0\n', '    exit\n']} on 1 hosts
2024-04-29 16:07:22,120 -  nornir.core -     INFO -        run() - Running task 'netmiko_save_config' with args {} on 1 hosts
2024-04-29 16:07:23,298 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_config' with args {'config_commands': ['\n', 'interface g3/0\n', '    encapsulation dot1Q \n', '    description "**NO DESCRIPTION**"\n', '    ip address  \n', '    exit\n', '\n', 'interface g3/0.10\n', '    encapsulation dot1Q 10\n', '    description "Gateway for teacher vlan"\n', '    ip address 172.16.30.254 255.255.255.0\n', '    exit\n', '\n', 'interface g3/0.20\n', '    encapsulation dot1Q 20\n', '    description "Gateway for student vlan"\n', '    ip address 172.16.40.254 255.255.255.0\n', '    exit\n']} on 1 hosts
2024-04-29 16:07:29,193 -  nornir.core -     INFO -        run() - Running task 'netmiko_save_config' with args {} on 1 hosts
2024-04-29 16:07:30,306 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_config' with args {'config_commands': ['\n', 'vlan 10\n', '    name teacher\n', '    exit\n', 'vlan 20\n', '    name student\n', '    exit\n', '\n', '\n', 'interface fa1/14\n', '    switchport mode trunk\n', '    switchport trunk allowed vlan all\n', '    exit\n', '\n', 'interface fa1/15\n', '    switchport mode trunk\n', '    switchport trunk allowed vlan all\n', '    exit\n', '\n', 'interface fa1/1\n', '    switchport mode access\n', '    switchport access vlan 10\n', '    description "port vlan teacher"\n', '    exit\n', '\n', 'interface fa1/2\n', '    switchport mode access\n', '    switchport access vlan 20\n', '    description "port vlan student"\n', '    exit']} on 1 hosts
2024-04-29 16:07:41,457 -  nornir.core -     INFO -        run() - Running task 'netmiko_save_config' with args {} on 1 hosts
2024-04-29 16:07:45,130 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_command' with args {'command_string': 'show vrrp brief'} on 4 hosts
2024-04-29 16:07:45,581 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_config' with args {'config_commands': ['interface GigabitEthernet2/0', 'shutdown']} on 1 hosts
2024-04-29 16:08:06,989 - nornir.core.task -    ERROR -      start() - Host 'R2-CPE-BAT-A': task 'netmiko_send_config' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_netmiko/tasks/netmiko_send_config.py", line 38, in netmiko_send_config
    result = net_connect.send_config_set(config_commands=config_commands, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 110, in wrapper_decorator
    return_val = func(self, *args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 2333, in send_config_set
    output += self.exit_config_mode()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/cisco_base_connection.py", line 58, in exit_config_mode
    return super().exit_config_mode(exit_config=exit_config, pattern=pattern)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 2137, in exit_config_mode
    if self.check_config_mode():
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/cisco/cisco_ios.py", line 55, in check_config_mode
    return super().check_config_mode(check_string=check_string, pattern=pattern)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/cisco_base_connection.py", line 42, in check_config_mode
    return super().check_config_mode(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 2090, in check_config_mode
    output = self.read_until_pattern(pattern=pattern)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 746, in read_until_pattern
    raise ReadTimeout(msg)
netmiko.exceptions.ReadTimeout: 

Pattern not detected: '[>#]' in output.

Things you might try to fix this:
1. Adjust the regex pattern to better identify the terminating string. Note, in
many situations the pattern is automatically based on the network device's prompt.
2. Increase the read_timeout to a larger value.

You can also look at the Netmiko session_log or debug log for more information.



2024-04-29 16:08:06,990 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_config' with args {'config_commands': ['interface GigabitEthernet3/0', 'shutdown']} on 1 hosts
2024-04-29 16:08:17,825 - nornir.core.task -    ERROR -      start() - Host 'R2-CPE-BAT-B': task 'netmiko_send_config' failed with traceback:
Traceback (most recent call last):
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir/core/task.py", line 99, in start
    r = self.task(self, **self.params)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/nornir_netmiko/tasks/netmiko_send_config.py", line 38, in netmiko_send_config
    result = net_connect.send_config_set(config_commands=config_commands, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 110, in wrapper_decorator
    return_val = func(self, *args, **kwargs)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 2333, in send_config_set
    output += self.exit_config_mode()
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/cisco_base_connection.py", line 58, in exit_config_mode
    return super().exit_config_mode(exit_config=exit_config, pattern=pattern)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 2137, in exit_config_mode
    if self.check_config_mode():
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/cisco/cisco_ios.py", line 55, in check_config_mode
    return super().check_config_mode(check_string=check_string, pattern=pattern)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/cisco_base_connection.py", line 42, in check_config_mode
    return super().check_config_mode(
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 2090, in check_config_mode
    output = self.read_until_pattern(pattern=pattern)
  File "/home/cpe/.local/share/virtualenvs/reseau-etendu-6MQWliMz/lib/python3.8/site-packages/netmiko/base_connection.py", line 746, in read_until_pattern
    raise ReadTimeout(msg)
netmiko.exceptions.ReadTimeout: 

Pattern not detected: '[>#]' in output.

Things you might try to fix this:
1. Adjust the regex pattern to better identify the terminating string. Note, in
many situations the pattern is automatically based on the network device's prompt.
2. Increase the read_timeout to a larger value.

You can also look at the Netmiko session_log or debug log for more information.



2024-04-29 16:08:17,826 -  nornir.core -     INFO -        run() - Running task 'netmiko_send_command' with args {'command_string': 'show vrrp brief'} on 2 hosts
